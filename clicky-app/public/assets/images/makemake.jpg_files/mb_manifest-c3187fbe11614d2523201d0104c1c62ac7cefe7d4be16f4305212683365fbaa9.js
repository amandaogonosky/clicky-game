(function(){null==window.JST&&(window.JST={}),window.JST.events=function(e){return function(){var e,t,i;return t=window.HAML.escape,e=window.HAML.cleanValue,i=[],i.push("<li class='slide'>\n  <div class='list_content'>\n    <div class='list_text'>\n      <div class='date'>"),i.push("        "+t(e(this.start_date))),this.end_date!==this.start_date&&i.push("        "+t(e(" - "+this.end_date))),i.push("      </div>\n      <h3 class='list_title'>\n        <a href='/events/"+e(this.item.id)+"' target='_self'>"),i.push("          "+t(e(this.item.title))),i.push("        </a>\n      </h3>\n      <a class='list_link' href='/events/"+e(this.item.id)+"' target='_self'>\u203a\u203a view details</a>\n    </div>\n  </div>\n</li>"),i.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}).call(this),function(){null==window.JST&&(window.JST={}),window.JST.news=function(e){return function(){var e,t,i;return t=window.HAML.escape,e=window.HAML.cleanValue,i=[],i.push("<li class='slide'>\n  <div class='image_and_description_container'>\n    <a href='"+e(this.url)+"' target='"+e(this.target)+"'>\n      <div class='rollover_description'>\n        <div class='rollover_description_inner'>"),i.push("          "+t(e(this.long_desc_rollover))),i.push("        </div>\n        <div class='overlay_arrow'>\n          <img src='/assets/overlay-arrow.png' alt='More'>\n        </div>\n      </div>\n      <div class='list_image'>\n        <img class='thumb' src='"+e(this.list_image_url)+"' alt='"+e(this.item.main_image_alt)+"'>\n      </div>\n      <div class='bottom_gradient'>\n        <div>\n          <h3>"),i.push("            "+t(e(this.item.title))),i.push("          </h3>\n        </div>\n      </div>\n    </a>\n    <div class='list_text'>\n      <div class='list_date'>"),i.push("        "+t(e(this.publish_date))),i.push("      </div>\n      <div class='content_title'>\n        <a href='"+e(this.url)+"' target='"+e(this.target)+"'>"),i.push("          "+t(e(this.item.title))),i.push("        </a>\n      </div>\n      <div class='article_teaser_body'>"),i.push("        "+t(e(this.long_desc))),i.push("      </div>\n    </div>\n  </div>\n</li>"),i.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST.publications=function(e){return function(){var e,t,i;return t=window.HAML.escape,e=window.HAML.cleanValue,i=[],i.push("<li class='slide'>\n  <div class='image_and_description_container'>\n    <div class='list_text'>"),this.url?(i.push("      <div class='publication_title'>\x92\n        <a href='"+e(this.url)+"' target='_blank'>"),i.push("        "+t(e(this.item.title))),i.push("        </a>\n      \x91</div>")):(i.push("      <div class='publication_title'>\x92"),i.push("        "+t(e(this.item.title))),i.push("      \x91</div>")),this.citation&&(i.push("      <div class='article_teaser_body'>\n        <div class='citation'>"),i.push("          "+e(this.citation)),i.push("        </div>\n      </div>")),i.push("    </div>\n  </div>\n</li>"),i.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"").replace(/[\s\n]*\u0091/gm,"").replace(/\u0092[\s\n]*/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST.resources=function(e){return function(){var e,t,i;return t=window.HAML.escape,e=window.HAML.cleanValue,i=[],i.push("<li class='slide'>\n  <div class='image_and_description_container'>\n    <a class='"+e(this.html_options["class"])+"' href='"+e(this.href)+"' data-fancybox-group='"+e(this.html_options["fancybox-group"])+"' data-fancybox-type='"+e(this.html_options["fancybox-type"])+"' data-fancybox-href='"+e(this.html_options["fancybox-href"])+"' data-title='"+e(this.html_options.title)+"' data-description='"+e(this.html_options.description)+"' data-credit='"+e(this.html_options.credit)+"' data-link='"+e(this.html_options.link)+"'>\n      <div class='rollover_description'>\n        <div class='rollover_description_inner'>"),i.push("          "+e(this.short_desc)),i.push("        </div>\n        <div class='overlay_arrow'>\n          <img src='/assets/overlay-arrow.png' alt='More'>\n        </div>\n      </div>\n      <div class='list_image'>\n        <img src='"+e(this.list_image_src)+"' alt='"+e(this.item.alt_text)+"'>\n      </div>\n      <div class='bottom_gradient'>\n        <div>\n          <h3>"),i.push("            "+e(this.item.title)),i.push("          </h3>\n        </div>\n      </div>\n    </a>\n    <div class='list_text'>\n      <div class='content_title'>\n        <a class='"+e(this.html_options["class"])+"' href='"+e(this.href)+"' data-fancybox-group='"+e(this.html_options["fancybox-group"])+"' data-fancybox-type='"+e(this.html_options["fancybox-type"])+"' data-fancybox-href='"+e(this.html_options["fancybox-href"])+"' data-title='"+e(this.html_options.title)+"' data-description='"+e(this.html_options.description)+"' data-credit='"+e(this.html_options.credit)+"' data-link='"+e(this.html_options.link)+"'>"),i.push("          "+t(e(this.item.title))),i.push("        </a>\n      </div>\n      <div class='article_teaser_body'>"),i.push("        "+e(this.short_desc)),i.push("      </div>\n    </div>\n  </div>\n</li>"),i.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){var e=[].slice;window.HAML=function(){function t(){}return t.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;")},t.cleanValue=function(e){switch(e){case null:case void 0:return"";case!0:case!1:return"\x93"+e;default:return e}},t.extend=function(){var t,i,n,a,o,s,r;for(a=arguments[0],s=2<=arguments.length?e.call(arguments,1):[],t=0,n=s.length;t<n;t++){o=s[t];for(i in o)r=o[i],a[i]=r}return a},t.globals=function(){return{}},t.context=function(e){return this.extend({},t.globals(),e)},t.preserve=function(e){return e.replace(/\n/g,"&#x000A;")},t.findAndPreserve=function(e){var t;return t="textarea,pre".split(",").join("|"),e=e.replace(/\r/g,"").replace(RegExp("<("+t+")>([\\s\\S]*?)<\\/\\1>","g"),function(e,t,i){return"<"+t+">"+window.HAML.preserve(i)+"</"+t+">"})},t.surround=function(e,t,i){var n;return e+(null!=(n=i.call(this))?n.replace(/^\s+|\s+$/g,""):void 0)+t},t.succeed=function(e,t){var i;return(null!=(i=t.call(this))?i.replace(/\s+$/g,""):void 0)+e},t.precede=function(e,t){var i;return e+(null!=(i=t.call(this))?i.replace(/^\s+/g,""):void 0)},t.reference=function(e,t){var i,n,a,o;if(n=t?t+"_":"","function"==typeof e.hamlObjectRef?n+=e.hamlObjectRef():n+=((null!=(a=e.constructor)?a.name:void 0)||"object").replace(/\W+/g,"_").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase(),i="function"==typeof e.to_key?e.to_key():"function"==typeof e.id?e.id():e.id?e.id:e,o="class='"+n+"'",i)return o+=" id='"+n+"_"+i+"'"},t}()}.call(this),function(){var e=[].slice;String.prototype.autoLink=function(){var t,i,n,a,o,s;return a=1<=arguments.length?e.call(arguments,0):[],o=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,0<a.length?(n=a[0],i=function(){var e;e=[];for(t in n)s=n[t],"callback"!==t&&e.push(" "+t+"='"+s+"'");return e}().join(""),this.replace(o,function(e,t,a){return e=("function"==typeof n.callback?n.callback(a):void 0)||"<a href='"+a+"'"+i+">"+a+"</a>",""+t+e})):this.replace(o,"$1<a href='$2'>$2</a>")}}.call(this),function(){}.call(this);var mb_utils={init:function(){this._extendJquery(),this._extendJavascript(),this.initIOS7FocusBugFix()},_extendJquery:function(){jQuery.fn.exists=function(){return this.length>0}},_extendJavascript:function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},printThis:function(){var e=navigator.userAgent.toLowerCase();window.print?window.print():-1!=e.indexOf("mac")?alert("Press 'Cmd+p' on your keyboard to print article. "):alert("Press 'Ctrl+p' on your keyboard to print article. ")},initScrollToTop:function(e){$(e).click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},600)})},addSlideToggleListener:function(e,t,i,n){e.click(function(){i(),t.slideToggle(n)})},touchclick:function(e,t){$(e).on("touchstart click",function(e){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;t($(this),e),e.handled=!0})},initIOS7FocusBugFix:function(){Modernizr.touch&&($("input, select, textarea").focus(function(){$("body").addClass("fixfixed")}),$("input, select, textarea").blur(function(){$("body").removeClass("fixfixed")}))},distanceFromTop:function(e){return $(e).offset().top},distanceFromTopOfContainer:function(e){return $(e).position().top},getParam:function(e){var t={};return location.search.substr(1).split("&").forEach(function(e){var i=e.split("="),n=i[0],a=i[1]&&decodeURIComponent(i[1]);n in t?t[n].push(a):t[n]=[a]}),t[e]},toggleText:function(e,t,i){e.preventDefault();var n=$(t),a=n.parents(".description"),o=a.find(".long"),s=a.find(".short"),i=i===undefined?{}:i,r=i.speed?i.speed:400;if(a.hasClass("condensed")){console.log("expand text");var l=s.height();s.hide(),o.css("min-height",l),o.slideDown(r)}else console.log("condense text"),o.slideUp(r,function(){s.show()});a.toggleClass("condensed")},initExpandableElement:function(){$(".expandable_element_link").click(function(){var e=$(this).attr("data-expand-index"),t=$('.expandable_element[data-expand-index="'+e+'"]'),i=$(this).attr("data-expand-text"),n=$(this).attr("data-contract-text");if(i&&n){var a=t.is(":visible")?i:n;$(this).text(a)}else{if($(this).text().indexOf("+ more")>=0||$(this).text().indexOf("- less")>=0){var a=t.is(":visible")?"+ more":"- less";$(this).text(a)}}t.slideToggle()})},writeToFancybox:function(e){$.fancybox({type:"html",content:e,openEffect:"none",closeEffect:"none",margin:0,padding:0})},simpleFormat:function(e,t){return e=e.replace(/\r\n?/,"\n"),e=$.trim(e),e.length>0&&(e=e.replace(/\n\n+/g,"</p><p>"),e=e.replace(/\n/g,"<br />"),t&&(e="<p>"+e+"</p>")),e},getIEVersion:function(){var e=navigator.userAgent,t=/MSIE\s?(\d+)(?:\.(\d+))?/i,i=e.match(t);return null!=i?{major:i[1],minor:i[2]}:e.indexOf("Trident/")>0?{major:11,minor:0}:e.indexOf("Edge/")>0?{major:12,minor:0}:{major:"-1",minor:"-1"}},linkCitationsToFootnotes:function(){var e=$(".wysiwyg_content ol.footnotes li");if(e.exists()){var t=$(".wysiwyg_content sup").not(".math");$.each(t,function(){var t=parseInt($(this).text()),i=e.get(t-1),n=null;i&&(n=$(i)),t&&n&&($(this).wrap('<a class="citation" href="#footnote_'+t+'"></a>'),0==n.hasClass("footnote")&&(n.addClass("footnote"),n.wrapInner(function(){return"<div id='footnote_"+t+"'></div>"})))})}$("a.citation").click(function(e){console.log("citation click"),e.preventDefault();var t=$(this).attr("href");console.log("href: "+t);var i=t.replace("#",""),n=$("div[id="+i+"]");mb_utils.slideToElement(n,105)})},launch_sized_popup_window:function(e,t,i,n,a){var o="",s="0";n!=undefined&&(o="?layout="+n),a!=undefined&&(s=a);window.open(e+o,"_blank","toolbar=0, titlebar=0, menubar=0, scrollbars="+s+", resizable=yes, width="+t+", height="+i);self.name="main"},slideToElement:function(e,t,i){console.log("slideToElement.offset: "+t),void 0===t&&(t=0);var n;n="string"==typeof e?$(e):e,i?window.scrollTo(0,n.offset().top-t):$("html, body").animate({scrollTop:n.offset().top-t},800)},mouseCheck:function(){if(!isMobile.any()&&(console.log("mouseCheck"),$("html.touchevents").length>0)){"yes"==mb_utils.readCookie("has_mouse")?$("html").removeClass("touchevents").addClass("no-touchevents"):$(window).one("mousemove",function(){mb_utils.createCookie("has_mouse","yes",1825),$("html").removeClass("touchevents").addClass("no-touchevents")})}},mobileAndTabletCheck:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},mobileCheck:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},humanize:function(e){return e.toString().toLowerCase().replace(/[_-]/g," ").replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},debounce:function(e,t,i){var n;return function(){var a=this,o=arguments,s=function(){n=null,i||e.apply(a,o)},r=i&&!n;clearTimeout(n),n=setTimeout(s,t),r&&e.apply(a,o)}},humanFileSize:function(e,t){var i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";var n=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do{e/=i,++a}while(Math.abs(e)>=i&&a<n.length-1);return e.toFixed(1)+" "+n[a]}},isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},iPad:function(){return navigator.userAgent.match(/iPad/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return screen.width<=500||isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}},mb_nav={menuBtn:".menu_button",navContainer:"#global_nav_container",subnavContainer:".global_subnav_container",globalNav:"#global_nav",nav:"#nav",arrowBtn:"#global_nav .arrow_box",subnav:".subnav",login:".login :submit",login:".logout :submit",defaultNavTopPos:-1,navHeight:0,subnavHeight:0,subnavPaddingBottom:18,init:function(e){if(void 0!==e)for(var t in e)mb_nav[t]=e[t];this._addNavArrows(),this._setDefaultStyles(),this._initListeners()},isHideable:function(){return $(mb_nav.menuBtn).is(":visible")},_initListeners:function(){$(mb_nav.menuBtn).click(function(){mb_nav._toggleMobileNav()}),$(mb_nav.arrowBtn).mouseover(function(){$(this).parent().find(mb_nav.subnavContainer)}),$(mb_nav.arrowBtn).click(function(){var e=$(this).parent().find(mb_nav.subnavContainer);mb_nav._toggleMobileSubnav(e),$(this).toggleClass("reverse")}),$(window).bind("resize",function(){mb_nav._setStylesToMatchNav()}),$("html").hasClass("lt-ie9")||($(window).bind("load resize",function(){mb_nav.isHideable()||mb_nav._setStickyNavBreakpoint()}),$(window).bind("load resize scroll",function(){mb_nav.isHideable()||mb_nav._positionStickyNav()}))},_addNavArrows:function(){$(mb_nav.subnav).parents("li").addClass("more-arrow"),$(".more-arrow").prepend('<div class="arrow_box"><span class="arrow_down"></span></div>')},_setDefaultStyles:function(){mb_nav.isHideable()?mb_nav._setHideableNavStyles():mb_nav._setPersistentNavStyles()},_setHideableNavStyles:function(){$("body").removeClass("desktop_menu desktop_submenu_hidden").addClass("mobile_menu mobile_menu_hidden mobile_submenu_hidden")},_setPersistentNavStyles:function(){$("body").removeClass("mobile_menu mobile_menu_hidden mobile_submenu_hidden").addClass("desktop_menu desktop_submenu_hidden")},_setStylesToMatchNav:function(){mb_nav.isHideable()?!$("body").hasClass("desktop_menu")&&$("body").hasClass("mobile_menu")||mb_nav._setHideableNavStyles():$("body").hasClass("mobile_menu")&&!$("body").hasClass("desktop_menu")&&(mb_nav._setPersistentNavStyles(),$(mb_nav.subnavContainer).removeClass("expanded"))},_toggleMobileNav:function(){var e=$("body"),t=$(mb_nav.navContainer),i=$(mb_nav.subnavContainer),n=$(mb_nav.globalNav);mb_nav.navHeight=n.height(),$("body").hasClass("mobile_menu_visible")?(e.addClass("mobile_submenu_hidden"),t.css("height",0),i.css("height",0).removeClass("expanded"),$(mb_nav.arrowBtn).removeClass("reverse"),e.removeClass("mobile_menu_visible").addClass("mobile_menu_hidden")):(t.css("height",mb_nav.navHeight),e.removeClass("mobile_menu_hidden").addClass("mobile_menu_visible"))},_toggleMobileSubnav:function(e){var t=!$(e).hasClass("expanded"),i=$(e).find(".subnav");mb_nav.subnavHeight=i.height()+mb_nav.subnavPaddingBottom,t?this._expandSubNav(e):this._contractSubNav(e)},_expandSubNav:function(e){$("body").removeClass("mobile_submenu_hidden"),$(e).addClass("expanded");var t=$(mb_nav.navContainer).height(),i=mb_nav.subnavHeight,n=(t+i).toString()+"px";$(mb_nav.navContainer).css("height",n),$(e).css("height",mb_nav.subnavHeight)},_contractSubNav:function(e){$(e).removeClass("expanded");var t=$(mb_nav.navContainer).height(),i=mb_nav.subnavHeight,n=(t-i).toString()+"px";$(mb_nav.navContainer).css("height",n),$(e).css("height",0)},_setStickyNavBreakpoint:function(){mb_nav.defaultNavTopPos=mb_utils.distanceFromTop(mb_nav.navContainer)},_positionStickyNav:function(){var e=$(window).scrollTop();mb_nav.defaultNavTopPos<e?$(mb_nav.navContainer).css({position:"fixed",top:0}).addClass("dropshadow"):($(mb_nav.navContainer).css("position","static").removeClass("dropshadow"),mb_nav._setStickyNavBreakpoint())},initFrontEndLoginState:function(){$(mb_nav.login).click(function(){return mb_nav._toggleLogin(),!1}),$(mb_nav.logout).click(function(){return mb_nav._toggleLogin(),!1})},_toggleLogin:function(){var e=($("body").hasClass("mobile_menu"),!$("body").hasClass("mobile_menu_visible"));$("body").hasClass("logged_in")?$("body").removeClass("logged_in").addClass("logged_out"):$("body").removeClass("logged_out").addClass("logged_in"),mb_nav.isHideable()&&!e&&this._toggleMobileNav()},initFrontEndNavHighlighting:function(){console.log("mb_nav.initFrontEndNavHighlighting");var e=$("#id > a"),t=document.location.href;for(i=0;i<e.length;i++){var n=e[i].href;t.indexOf(n)>=0&&e[i].addClass("current")}}},mb_meganav={init:function(){this.initListeners()},initListeners:function(){var e=".no-touchevents ul.nav > li",t=".no-touchevents ul.nav > li a, .no-touchevents ul.nav > li .unclickable_item[tabindex]";$(e).on("mouseenter",function(){mb_meganav.isDesktopNav()&&mb_meganav.openMegaNav(this)}),$(e).on("mouseleave",function(){mb_meganav.isDesktopNav()&&mb_meganav.closeMegaNav(this)}),$(t).on("focus",function(){if(mb_meganav.isDesktopNav()){var e=mb_meganav.getListItem($(this));e.length&&mb_meganav.openMegaNav(e)}}),$(t).on("blur",function(e){var t=mb_meganav.getListItem($(this));if(t.length){var i=$.contains(t.get(0),e.relatedTarget);mb_meganav.isDesktopNav()&&!i&&mb_meganav.closeMegaNav(t)}}),$(".touchevents ul.nav > li").on("click",mb_meganav.onTouch)},onTouch:function(e){if(mb_meganav.isDesktopNav())if(e.preventDefault(),e.stopPropagation(),$(e.originalEvent.currentTarget).hasClass("expanded")){console.log("meganav open, set up listeners");var t=mb_meganav.getMeAnHref(e);t&&(t.addClass("pressed"),window.location=t.attr("href"))}else{var i=$("ul.nav > li.expanded").length>0;if(i&&mb_meganav.closeMegaNav($("li.expanded")[0]),$(this).children(".global_subnav_container").length)mb_meganav.openMegaNav(this);else{$(".page_cover").hide();var t=mb_meganav.getMeAnHref(e);t&&(t.addClass("pressed"),window.location=t.attr("href"))}$(".page_cover").off().on("touchstart",function(){mb_meganav.closeMegaNav($("li.expanded")[0])})}},isDesktopNav:function(){return $("#modal_close").is(":hidden")},getListItem:function(e){var t=e.closest(".nav_title");if(t.length)return t.closest("li");var i=e.closest(".global_subnav_container");return i.length?i.closest("li"):void 0},getMeAnHref:function(e){var t;if($(e.target).attr("href"))t=$(e.target);else{var i=$(e.target).parents("a");i.length>0&&(t=i.eq(0))}return t},openMegaNav:function(e){var t=$(e),i=t.find(".meganav_container");i.length>0&&(t.addClass("expanded"),i.show(),$(".page_cover").show())},closeMegaNav:function(e){var t=$(e),i=t.find(".meganav_container");t.removeClass("expanded"),$(".page_cover").hide(),i.hide()}};$.extend(mb_utils,{initResponsiveElement:function(e,t,i,n,a){void 0===n&&(n=mb_responsive_utils.getResponsiveBreakpoint()),$(window).bind("load resize",function(){mb_responsive_utils.moveResponsiveElements(e,t,i,n,a)})}});var mb_responsive_utils={_responsive_breakpoint:769,setResponsiveBreakpoint:function(e){this._responsive_breakpoint=e},getResponsiveBreakpoint:function(){return this._responsive_breakpoint},moveResponsiveElements:function(e,t,i,n,a){var o=$(window).width()<this._responsive_breakpoint,s=o?i:t;1==a&&$("html").hasClass("touch")?mb_responsive_utils._moveElementIfNecessary(e,i):mb_responsive_utils._moveElementIfNecessary(e,s)},_moveElementIfNecessary:function(e,t){$(t).attr("id")!=undefined&&$(e).parent().attr("id")!=undefined&&$(t).attr("id")!=$(e).parent().attr("id")&&(console.log("Moving Responsive Element: "+e+" from #"+$(e).parent().attr("id")+" to "+t),$(e).prependTo(t))}};$.extend(mb_utils,{createCookie:function(e,t,i,n){if(console.log("mb_utils.createCookie: "+e,t,i,n),i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var o="; expires="+a.toGMTString()}else var o="";var s=void 0===s||s;if(1==s&&"https:"==window.location.protocol)var r="; secure";else var r="";document.cookie=e+"="+t+o+r+"; path=/"},readCookie:function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return console.log("mb_utils.readCookie: "+e,a.substring(t.length,a.length)),a.substring(t.length,a.length)}return null},eraseCookie:function(e){mb_utils.createCookie(e,"",-1)}});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,a,o,s,r,l="",c=0;for(e=Base64._utf8_encode(e);c<e.length;)t=e.charCodeAt(c++),i=e.charCodeAt(c++),n=e.charCodeAt(c++),a=t>>2,o=(3&t)<<4|i>>4,s=(15&i)<<2|n>>6,r=63&n,isNaN(i)?s=r=64:isNaN(n)&&(r=64),l=l+Base64._keyStr.charAt(a)+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(r);return l},decode:function(e){var t,i,n,a,o,s,r,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)a=Base64._keyStr.indexOf(e.charAt(c++)),o=Base64._keyStr.indexOf(e.charAt(c++)),s=Base64._keyStr.indexOf(e.charAt(c++)),r=Base64._keyStr.indexOf(e.charAt(c++)),t=a<<2|o>>4,i=(15&o)<<4|s>>2,n=(3&s)<<6|r,l+=String.fromCharCode(t),64!=s&&(l+=String.fromCharCode(i)),64!=r&&(l+=String.fromCharCode(n));return l=Base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",i=0,n=c1=c2=0;i<e.length;)n=e.charCodeAt(i),n<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return t}},mb_responsive_tables={init:function(){$(".wysiwyg_content table, .extra_wide_content").each(function(){var e=$(this),t=$("<div />",{"class":"table_wrapper",html:"<div />"}).insertBefore(e);e.data("scrollWrapper",t),e.appendTo(t.find("div")),e.outerWidth()>e.parent().outerWidth()&&e.data("scrollWrapper").addClass("has-scroll"),$(window).on("resize orientationchange",function(){e.outerWidth()>e.parent().outerWidth()?e.data("scrollWrapper").addClass("has-scroll"):e.data("scrollWrapper").removeClass("has-scroll")})})}};!function(e){var t="more_items",i=function(t,n){return this.$T=e(t),this.options=e.extend(!0,{page_number:0,url:"",button:e(".more_button .button"),entry_selector:t.children("li:last"),build_item_fn:i.prototype.buildItem,more_fn:"getMoreItemsAndAppend"},n),this._init(t,this.options),this};i.prototype._init=function(t,i){i.button.on("click",function(n){n.preventDefault(),e(t).more_items(i.more_fn)})},i.prototype.getMoreItemsAndAppend=function(t){return e(".loading").show(),this.options.button.hide(),this._getMore(t[0]),this.$T},i.prototype.exposeNextPage=function(){this.options.page_number+=1,this.$T.find(".page_"+this.options.page_number).show();var e=this.options.page_number+1;0==this.$T.find(".page_"+e).length&&this.options.button.hide()},i.prototype.emptyAndReload=function(t){this.$T.empty(),e(".loading").show(),this.options.button.hide(),this.options.zero_based?this.options.page_number=-1:this.options.page_number=0,this.options.params=t[0],this._getMore()},i.prototype._getMore=function(t){var i=this;i.options.get_items_on_load||(i.options.page_number+=1);var n={};this.options.page_key?n[this.options.page_key]=this.options.page_number:n.page=this.options.page_number;var a=e.extend(t,n,this.options.params),o=this.options.button;e.getJSON(this.options.url,a).done(function(t){var n="";i.options.before_fn&&i.options.before_fn();for(var a=0;a<t.items.length;a++)n+=i.options.build_item_fn(t.items[a]);""!=n?(i.options.get_items_on_load&&0==i.options.page_number?i.$T.append(n):i.options.entry_selector.after(n),i.options.entry_selector=i.$T.children("li:last")):i.options.get_items_on_load&&0==i.options.page_number&&i.$T.append("<p>There are no items matching this criteria.</p>"),t.error_message&&i.options.entry_selector.after("<hr><div class='error'>"+t.error_message+"</div>"),e(".loading").hide(),t.more&&1==t.more&&o.show(),i.options.get_items_on_load&&(i.options.page_number+=1),i.options.after_fn&&i.options.after_fn()}).fail(function(e,t,i){var n=t+", "+i;console.log("ajax request failed: "+n)})},i.prototype.buildItem=function(e){var t=e.target?e.target:"_blank",i='<li class="slide">';return i+='<a href="'+e.url.replace('"','"')+'" target="'+t+'">',i+='<div class="image_and_description_container">',i+='<div class="rollover_description">'+e.description,i+='<div class="overlay_arrow">',i+='<img alt="more arrow" src="/assets/overlay-arrow.png">',i+="</div>",i+="</div>",i+='<div class="img">',i+='<img alt="'+e.title.replace('"','"').replace(/(<([^>]+)>)/gi,"")+'" ',i+='class="thumb" src="'+e.thumb+'"></div>',i+='<div class="bottom_gradient">',i+="<div>",i+="<h3>"+e.title+"</h3>",i+="</div>",i+="</div>",i+="</div>",i+='<div class="list_text_content">',i+='<div class="content_title">',i+=e.title,i+="</div>",i+='<div class="article_teaser_body">',i+=e.description,i+="</div>",i+="</div>",i+="</a>",i+="</li>"},e.fn[t]=function(n){if(!e(this).length)return e(this);var a=e(this).data(t);return a&&0!=n.indexOf("_")&&a[n]&&"function"==typeof a[n]?a[n](Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void(a?0==n.indexOf("_")?e.error("Method "+n+" is private!"):e.error("Method "+n+" does not exist."):e.error("Plugin must be initialised before using method: "+n)):(a=new i(e(this),n),e(this).data(t,a),e(this))}}(jQuery),mb_sharelines={initted:!1,fb_app_id:null,init:function(e){this.fb_app_id=e,this.initted||(console.log("sharelines initted."),this.getPartnerScripts(),this.initListeners(),this.initted=!0),this.addClassesToAttachedSharelines()},initListeners:function(){$(".selected").click(function(e){mb_sharelines.shareMessage(this,e)}),$(".selector").click(function(){console.log("selector clicked"),$(this).parents(".shareline").find(".share_options").toggle()}),$(".share_options *").click(function(e){mb_sharelines.shareMessage(this,e);var t=$(this).attr("class").replace("share_btn","");console.log("selected ",t),$(this).parents(".shareline").find(".selected").attr("class","selected "+t),$(this).parents(".shareline").find(".share_options").hide()})},addClassesToAttachedSharelines:function(){var e=".shareline",t="bottom_attached_sl",i="top_attached_sl",n=$(e).next(e),a=$(e).next("br").next(e),o=$(e).prev(e),s=$(e).prev("br").prev(e);n.addClass(t),a.addClass(t),o.addClass(i),s.addClass(i)},shareMessage:function(e,t){if($(e).hasClass("fi-social-twitter")){console.log("tweet!");var i=$(e).attr("href");$(e).parents(".shareline").find(".selected").attr("href",i)}else if($(e).hasClass("fi-social-facebook")){console.log("facebook!"),t.preventDefault(),$(e).parents(".shareline").find(".selected").attr("href","#");var n=$(e).parents(".shareline").find(".share_text").text();"undefined"!=typeof FB?FB.ui({method:"feed",link:window.location.href,description:n},function(){}):console.error("No Facebook app id, need this to share on FB")}else console.log("Selected clicked but unknown state",$(e).attr("class"))},getPartnerScripts:function(){this.fb_app_id&&this.initFacebook(),this.initTwitter()},initTwitter:function(){$.getScript("https://platform.twitter.com/widgets.js")},initFacebook:function(){$.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:mb_sharelines.fb_app_id,version:"v2.4"})})}},mb_utils.mouseCheck=function(){if(!isMobile.any()&&(console.log("mouseCheck"),$("html.touchevents").length>0)){
"yes"==mb_utils.readCookie("has_mouse")?$("html").removeClass("touchevents").addClass("no-touchevents"):$(window).one("mousemove",function(){mb_utils.createCookie("has_mouse","yes",1825),$("html").removeClass("touchevents").addClass("no-touchevents")})}};var nav={arrowBtn:"#site_nav_container .arrow_box",lastScrollTop:0,navTitle:".nav_item .nav_title",desktopStickyTopPos:0,opts:null,onscroll_classes:"nav_is_fixed",add_rem_selector:"body",nav_area:".nav_area",menu_open_div:".site_header_area",init:function(e,t){if(console.log("desktopStickyTopPos: "+e),e&&(this.desktopStickyTopPos=e),t&&t.style)switch(t.style){case"transparent":this.add_rem_selector=".site_header_area",this.onscroll_classes="fixed fixed_show";break;case"opaque_on_scroll":$(window).scroll(function(){var e=$(".site_header_area");$(window).scrollTop()>0?e.addClass("opaque"):e.removeClass("opaque")})}t&&t.onscroll_classes&&(this.onscroll_classes=t.onscroll_classes),t&&t.add_rem_selector&&(this.add_rem_selector=t.add_rem_selector),t&&(this.opts=t),this.initListeners()},initListeners:function(){$("a#menu_button").click(function(e){e.preventDefault(),$(nav.nav_area).show(),$(nav.menu_open_div).addClass("menu_open"),$("a#menu_button").hide(),$("body").addClass("nav_overlay_true")}),$("a.modal_close").click(function(e){e.preventDefault(),$(nav.nav_area).hide(),$(nav.menu_open_div).removeClass("menu_open"),$("a#menu_button").show(),$("body").removeClass("nav_overlay_true")}),$(nav.arrowBtn).click(function(){nav.toggleSubnav(this)}),$(nav.navTitle).click(function(){nav.toggleSubnav(this)}),$(window).scroll(nav.onScroll)},onScroll:function(){var e=$(window).scrollTop();nav.lastScrollTop;nav.lastScrollTop=e,$(window).scrollTop()>nav.desktopStickyTopPos?(nav.opts&&nav.opts.beforeScrollAdd&&nav.opts.beforeScrollAdd(),$(nav.add_rem_selector).addClass(nav.onscroll_classes),nav.opts&&nav.opts.afterScrollAdd&&nav.opts.afterScrollAdd()):(nav.opts&&nav.opts.beforeScrollRemove&&nav.opts.beforeScrollRemove(),$(nav.add_rem_selector).removeClass(nav.onscroll_classes),nav.opts&&nav.opts.afterScrollRemove&&nav.opts.afterScrollRemove())},toggleSubnav:function(e){if("inline-block"!=$(".subnav li").css("display")){var t=$(e).parent().find(".global_subnav_container"),i=$(e).parent().find(".arrow_box");$(t).slideToggle(300),$(i).toggleClass("reverse")}}},grid_list_page={filterPos:"",init:function(){this.initGridListButtons(),this.initFilterBar()},initGridListButtons:function(){$(".nav_item.list_icon").click(function(){$(this).parents("section").removeClass("grid_view"),$(this).parents("section").addClass("list_view")}),$(".nav_item.grid_icon").click(function(){$(this).parents("section").removeClass("list_view"),$(this).parents("section").addClass("grid_view")})},initFilterBar:function(){$(".filter_bar").exists()&&(mb_utils.touchclick(".filter_bar header",function(){$(".filter_bar .arrow_box").is(":visible")&&($(".filter_bar .arrow_box").toggleClass("rotate_up"),$(".section_search").toggle())}),$(".filter_bar .filter").change(function(){this.form.submit()}))}},scical={key:"AIzaSyB-YdQWxXQtmjxqqnzWdfaXBox7yM7vonE",url:"https://www.googleapis.com/calendar/v3/calendars/eni.g.njoku@jpl.nasa.gov/events?maxResults=3&singleEvents=True&futureEvents=True&orderBy=startTime",footer_sel:"#footer_science_calendar",monthabbrs:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],init:function(){var e=scical.url+"&timeMin="+scical.curDate()+"&key="+this.key;$.get(e,scical.insertScienceCalendar)},insertScienceCalendar:function(e){$.each(e.items,function(e,t){var i=t.start.date==undefined?t.start.dateTime.substring(0,10):t.start.date,n=t.end.date==undefined?t.end.dateTime.substring(0,10):t.end.date,a="";a=i==n?scical.dateToStr(new Date(i)):scical.dateToStr(new Date(i))+" - "+scical.dateToStr(new Date(n));var o=t.summary,s="<div class='col"+(e+1)+"'><div class='event_date'>"+a+"</div><div class='event_title'>"+o+"</div>";$(scical.footer_sel).append(s)})},dateToStr:function(e){return scical.monthabbrs[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()},curDate:function(){var e=new Date,t=e.getDate(),i=e.getMonth()+1,n=e.getFullYear();return t<10&&(t="0"+t),i<10&&(i="0"+i),today_formatted=n+"-"+i+"-"+t+"T00:00:00-04:00",today_formatted}};mb_parallax={init:function(){var e=$(".explore_overlay_page").length>0,t=$("section.feature_pages").length>0;if(mb_utils.mobileAndTabletCheck()||e||!t)$(".parallax_module .featured_image").each(function(t,i){e?$(i).siblings(".window").remove():$(i).siblings(".window").addClass("mobile");var n=$(i).data("image");$(i).append('<img src="'+n+'"></img>')});else{var i=mb_utils.getIEVersion(),n=i.major>1&&i.major<=9;$(".parallax_module .featured_image").each(function(e,t){$(t).imageScroll({container:$(t).closest(".parallax_module"),holderMinHeight:800,parallax:!n})})}}},$(document).ready(function(){mb_parallax.init()});var main={spinner_opts:{lines:8,length:5,width:3,radius:6,color:"#000",speed:1,trail:100,shadow:!1,className:"spinner",top:"20px",left:"50%"},mousePos:{x:-1,y:-1},nav_search_open:!1,nav_search_orig_size:null,changePage:function(e,t){"Website"==t&&window.open(e,"_blank"),window.location=e},init:function(){mb_utils.init(),main.initListeners(),nav.init(),0==$('[data-react-class="GridListPage"]').length&&0==$('[data-react-class="GridList"]').length&&0==$('[data-react-class="FacetedSearch"]').length&&grid_list_page.init();$("nav.secondary_nav").length;$(".main_feature").length>0&&$("body").addClass("main_feature_present"),$(".top_feature_area ~ .tertiary_nav_container").length>0&&$(".top_feature_area").addClass("before_tertiary_nav_container"),$(".touchevents .exep_site_nav ul.nav > li").click(function(e){if($("#modal_close").is(":hidden"))if(e.preventDefault(),e.stopPropagation(),$(this).hasClass("active")){var t=mb_meganav.getMeAnHref(e);t&&(t.addClass("pressed"),window.location=t.attr("href"))}else{if($(e.originalEvent.currentTarget).siblings(".active").removeClass("active"),$(".page_cover").show(),$(this).children(".global_subnav_container").length)$(this).addClass("active"),$("li.active .global_subnav_container").show();else{$(".page_cover").hide();var t=mb_meganav.getMeAnHref(e);t&&(t.addClass("pressed"),window.location=t.attr("href"))}$("body.exep_section .page_cover").click(function(){$(".exep_site_nav ul.nav li.active").removeClass("active"),$(".page_cover").hide()})}}),mb_responsive_tables.init(),this._checkAndSetFormElementsBasedOnQueryParams(),mb_utils.linkCitationsToFootnotes(),mb_utils.initExpandableElement(),mb_utils.mouseCheck(),this.equalHeights()},initListeners:function(){function e(){var e=$("#featured_image");$(e.get(0)).imageScroll("refresh")}if(isMobile.any()){$("#vital_signs_modal").css("height",window.innerHeight-36+"px");var t=$("#featured_image").attr("data-mobile-image"),i=$("#featured_image").attr("data-image");$("#featured_image").siblings(".window").addClass("mobile");var n='<picture><source srcset="'+i+'"media="(min-width: 600px)"><source srcset="'+t+'"/><img src="'+t+'"></picture>';$("#featured_image").append(n)}else{var a=mb_utils.getIEVersion(),o=a.major>1;$("#featured_image").imageScroll({container:$(".image_of_the_day"),holderMinHeight:400,holderMaxHeight:680,parallax:!o}),window.addEventListener("resize",function(){e()},!0);var s;s=setInterval(e,100),setTimeout(function(){clearInterval(s)},5e3),window.addEventListener("load",function(){clearInterval(s)})}mb_utils.mobileAndTabletCheck()||$(".fancybox").fancybox({maxWidth:$(window).width()-64,fitToView:!1,openEffect:"none",closeEffect:"none",padding:0});var r,l;isMobile.any()?(r=[20,20,20,20],l=!1):(r=[30,55,30,55],l=!0),$("a.fancybox_video").fancybox({fitToView:!1,autoscale:!1,margin:r,autoSize:!1,closeClick:!1,closeBtn:!1,openEffect:"none",closeEffect:"none",nextEffect:"fade",prevEffect:"fade",mouseWheel:!1,theme:"mb-video",arrows:l,beforeShow:function(){video&&$(video.video_div).exists()&&jwplayer(video.video_div).pause(!0)}});var c={padding:10,maxWidth:$(window).width()-64,openEffect:"fade",closeEffect:"fade",mouseWheel:!1,theme:"dark",helpers:{thumbs:{source:function(e){return $(e.element).attr("data-thumbnail")}}},beforeLoad:function(){var e=$(this.element).attr("data-title");window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),e+='<div class="wrapper_spacer">',e+="  <div class='addthis_toolbox addthis_default_style'    addthis:url='"+window.location.origin+$(this.element).attr("data-link")+"'   addthis:title='"+$(this.element).attr("data-title")+"'   addthis:description='"+$(this.element).attr("data-sharedescription")+"'  >",e+='     <div class="buttons">',e+='       <a class="addthis_button_compact">',e+='         <img src="/assets/share.png">',e+="       </a>";var t=$(this.element).attr("data-external-id");if(t){var i=mb_utils.readCookie("raw_images_selection"),n=i?i.split(","):[],a=n.indexOf(t)>-1?"selected":"",o='$(window).trigger("selectToggleFromFancybox",'+t+")",s=$(this.element).attr("data-link").match(/\/(.+)$/)[1];e+='       <a class="button select_raw_image '+a+"\"  href='#' data-external-id='"+t+"' target=\"_top\" onclick='"+o+"; return false;'>",e+="<span class='checkbox_icon' />",e+="<span class='button_text' > SELECT</span>",e+="       </a>",e+='       <a class="button" href="'+$(this.element).attr("data-fancybox-href")+' " target="_top" download="'+s+'">',e+="DOWNLOAD",e+="       </a>",e+='       <a class="button" href="/raw_images/'+$(this.element).attr("data-id")+' " target="_top">',e+="more info",e+="       </a>"}else e+='       <a class="button" href="'+$(this.element).attr("data-link")+' " target="_top">',e+="more info",e+="       </a>";e+="     </div>",e+="   </div>",e+="</div>",this.title=e},afterShow:function(){var e=$(this.element).attr("data-external-id"),t=$(this.element).attr("data-id");e&&t?(console.log("raw images fancybox afterShow"),$(".fancybox-inner .fancybox-image").css("cursor","pointer").click(function(){$.fancybox.next()}),ga("create","UA-10170298-1","auto"),ga(function(e){var i=e.get("clientId");$.ajax({url:"/raw/view/"+t+"?cid="+i,type:"GET",dataType:"jsonp"})})):$(".fancybox-inner .fancybox-image").wrap('<a href="'+$(this.element).attr("data-link")+'"></a>'),"undefined"!=typeof addthis&&(addthis.toolbox($(".addthis_toolbox").get()),$("#at20mc.ipad").show())},afterClose:function(){$(this.element).attr("data-id")&&$(window).trigger("setCurrentDetailFromFancybox",[$(this.element).attr("data-id")]),$("#at20mc.ipad").hide()}};$(".fancybox_slideshow").fancybox(c),$(".fancybox_slideshow_launch").click(function(e){e.preventDefault(),$(this).parents(".image_and_description_container").find("a.fancybox_slideshow").click()}),$(".fancybox_info").fancybox({openEffect:"none",closeEffect:"none",closeBtn:!1,mouseWheel:!1,maxWidth:$(window).width()-165,maxHeight:$(window).height(),fitToView:!1,width:"100%",height:"100%",autoSize:!1,theme:"mb-info",beforeLoad:function(){this.title=main.constructFancyBoxInfo(this.element,!0)},afterShow:function(){$(".close_button").click(function(){parent.$.fancybox.close(),"undefined"!=typeof _atw&&_atw.clb()}),"undefined"!=typeof addthis&&addthis.toolbox($(".addthis_toolbox").get()),$(".addthis_button_compact img").on("mouseover",function(){return!1})},padding:0}),$(window).resize(function(){$(window).width()>1024&&$(".vital_signs_menu ul").slick("slickGoTo",0)}),$("section.more_bar").click(function(e){main.scrollDown(e)})},scrollDown:function(e){e.preventDefault();var t=$(e.currentTarget).offset().top-($("header.site_header").innerHeight()-$("section.more_bar").innerHeight());$("html,body").animate({scrollTop:t},600)},resizeFancybox:function(e){if(console.log(e),$(".fancybox-wrap").exists()){$(".fancybox-wrap,.fancybox-inner").height(e+50)}},constructFancyBoxInfo:function(e){console.log("constructFancyBoxInfo");var t="";return t+='<div id="fancybox_info">',t+=' <div class="image_details">',t+='\t <div class="buttons clearfix">',t+='   <div class="close_button"></div>',t+='\t   <div class="inner_buttons">',t+='\t    <div class="addthis_toolbox addthis_default_style"addthis:url="'+$(e).attr("data-link")+'"addthis:title="'+$(e).attr("data-title")+'"addthis:description="'+$(e).attr("data-description").replace('"',"&quot;").replace(/(<([^>]+)>)/gi,"")+'">',t+='\t\t   <a class="addthis_button_compact">',t+='\t\t    <img src="/assets/share.png">',t+="\t\t   </a>",t+='\t    <div class="atclear"></div>',t+="    </div>",t+='\t   <a class="button" href="'+$(e).attr("data-link")+' " target="_top">',t+="more info",t+="\t   </a>",t+="\t  </div>",t+="\t </div>",t+='\t <div class="text">',t+='\t  <h2 class="title">',t+=$(e).attr("data-title"),t+="\t  </h2>",t+='\t  <div class="description">',t+=$(e).attr("data-description"),t+="\t  </div>",$(e).attr("data-credit")!=undefined&&(t+='\t  <div class="image_caption">',t+=$(e).attr("data-credit"),t+="\t  </div>"),t+="  </div>",t+=" </div>",t+="</div>"},checkSubscribeForm:function(){var e=$("#newsletter_subscribe_email").val(),t=e.indexOf("@"),i=e.lastIndexOf(".");if(t<1||i<t+2||i+2>=e.length)return alert("Not a valid e-mail address"),!1;$.post("/newsletter_subscribe_submit",{email:e})},_checkAndSetFormElementsBasedOnQueryParams:function(){if("undefined"!=typeof form_params)for(var e=0;e<form_params.length;e++){var t=mb_utils.getParam(form_params[e].param);t&&(console.log("setting "+form_params[e].selector+" to "+t),$(form_params[e].selector).val(t))}},equalHeights:function(){viewportSize.getWidth();$(window).bind("load resize",function(){viewportSize.getWidth()<769?(viewportSize.getWidth(),$(".applications_large_button").unequalHeights(),viewportSize.getWidth()<600?$(".applications_large_button").unequalHeights():$(".applications_large_button").equalHeights()):($(".applications_large_button").unequalHeights(),$(".applications_large_button").equalHeights())})}};$(function(){main.init()}),$("html").on("blur",".nav_search .search_field",function(){$("body").trigger("dashboard_resize")}),footer={init:function(){this._initIsotopeFooter()},_initIsotopeFooter:function(){$("#sitemap_directory, #sitemap_directory_404").isotope({itemSelector:".sitemap_block",layoutMode:"masonry"})}},$(document).ready(function(){footer.init()}),addthis_loader={initted:!1,floater:!1,follow:!1,script_src:null,is_admin:null,share_url:null,layer_opts:{theme:"transparent",share:{position:"left",services:"twitter,facebook,email,more",offset:{top:"60%"}},responsive:{maxWidth:"479px"}},init:function(e,t){this.is_admin=window.location.href.search("mbcms")>=0,t.floater&&(this.floater=t.floater),t.follow&&(this.follow=t.follow),t.addthis_url&&(addthis_loader.share_url=t.addthis_url),this.script_src=e,addthis_loader.initted=!0},scriptLoaded:function(){"undefined"!=typeof addthis?(console.log("addthis script loaded"),addthis_loader.floater&&(addthis.layers(addthis_loader.layer_opts),addthis_loader.initListeners()),addthis_loader.share_url&&addthis.update("share","url",addthis_loader.share_url)):window.setTimeout(function(){addthis_loader.scriptLoaded()},500)},initListeners:function(){addthis.addEventListener("addthis.ready",addthis_loader.addthisReady)},addthisReady:function(){var e=.5*$(window).height();$(window).scroll(function(){$(window).scrollTop()>e&&!$(".addthis-smartlayers").hasClass("done")&&(console.log("show addthis float"),$(".addthis-smartlayers").css({opacity:0,visibility:"visible"}).animate({opacity:1}),$(".addthis-smartlayers").addClass("done"))})}},$(document).ready(function(){addthis_loader.initted&&!addthis_loader.is_admin&&(addthis_config={data_track_addressbar:!1},$.getScript(addthis_loader.script_src,addthis_loader.scriptLoaded))});